# ü§ñ –°–µ—Ä–≤–µ—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ v1.3.0

**–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å Telegram –±–æ—Ç–æ–º –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º**

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** —Å–µ—Ä–≤–µ—Ä–æ–≤ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏**: Ping, SSH, RDP (–ø–æ—Ä—Ç 3389)
- **–£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤** –ø–æ —Ç–∏–ø–∞–º (Windows, Linux, Proxmox)

### üíª –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** CPU, RAM, Disk –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- **–†–∞–∑–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –ø–æ —Ç–∏–ø–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ ZFS** –¥–ª—è Proxmox –∏ –±—ç–∫–∞–ø-—Å–µ—Ä–≤–µ—Ä–æ–≤
- **–£–º–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã** –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤

### üîá –ì–∏–±–∫–∏–µ —Ä–µ–∂–∏–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–¢–∏—Ö–∏–π —Ä–µ–∂–∏–º** (20:00 - 9:00) - —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —Ä–µ–∂–∏–º–∞–º–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º** –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

### üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞** —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- **–í–∫–ª–∞–¥–∫–∏**: –û–±–∑–æ—Ä, –°–µ—Ä–≤–µ—Ä–∞, –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **API endpoints** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

### üì± Telegram –±–æ—Ç
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é** —Å –∫–Ω–æ–ø–∫–∞–º–∏
- **–†–∞–∑–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã** –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã** –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ì—Ä—É–ø–ø–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–∏—Å—Ç–µ–º—ã
- **Windows Server**: 2025, 2019, 2016, 2012 R2
- **Linux**: Ubuntu, Debian, CentOS, Proxmox VE
- **–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: ZFS, Proxmox –∫–ª–∞—Å—Ç–µ—Ä—ã

### –ú–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞
- **SSH**: –∫–ª—é—á–µ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- **WinRM**: –¥–ª—è Windows —Å–µ—Ä–≤–µ—Ä–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **RDP**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞
- **Ping**: –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ** (`config.py`)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Ç–æ–≤** Telegram
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** –∫ –∫–æ–º–∞–Ω–¥–∞–º –±–æ—Ç–∞
- **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫

---

## üìã –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ö–æ–º–∞–Ω–¥—ã Telegram –±–æ—Ç–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏
- `/help` - –ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- `/status` - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `/check` - –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- `/control` - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- `/silent` - –°—Ç–∞—Ç—É—Å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏—Ö–∏–º —Ä–µ–∂–∏–º–æ–º
- `/servers` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- `/report` - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –æ—Ç—á–µ—Ç–∞

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é:
  - üíª –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CPU
  - üß† –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RAM  
  - üíæ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Disk
  - üêß Linux —Å–µ—Ä–≤–µ—Ä—ã
  - ü™ü Windows —Å–µ—Ä–≤–µ—Ä—ã
  - üì° –î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–µ—Ä—ã

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- `/diagnose_ssh <ip>` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `/fix_monitor` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ—É–Ω–∫—Ü–∏–∏

#### –í–∫–ª–∞–¥–∫–∞ "–û–±–∑–æ—Ä"
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
- –°—Ç–∞—Ç—É—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Ä–µ–∂–∏–º–æ–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ—Å—É—Ä—Å–∞—Ö —Å–∏—Å—Ç–µ–º—ã
- –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

#### –í–∫–ª–∞–¥–∫–∞ "–°–µ—Ä–≤–µ—Ä–∞"
- –î–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ—Å—É—Ä—Å–∞—Ö (CPU, RAM, Disk)
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å—É

#### –í–∫–ª–∞–¥–∫–∞ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
- –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –æ—Ç—á–µ—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- **–£—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—á–µ—Ç** –≤ 8:30
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏** –∑–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–±–ª–µ–º** –ø–æ —Ç–∏–ø–∞–º —Å–µ—Ä–≤–µ—Ä–æ–≤
- **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** –¥–∞–∂–µ –≤ —Ç–∏—Ö–æ–º —Ä–µ–∂–∏–º–µ

#### –£–º–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
- **CPU**: 2 –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥—Ä—è–¥ ‚â•99%
- **RAM**: 2 –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥—Ä—è–¥ ‚â•99%  
- **Disk**: —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚â•95%
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–≤—Ç–æ—Ä–∞**: 30 –º–∏–Ω—É—Ç

#### –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 –ø—Ä–æ–≤–µ—Ä–æ–∫** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- **–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤** –¥–ª—è —É–º–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**

---

## ‚öôÔ∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –í–∞–∂–Ω–æ!
–§–∞–π–ª `config.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ **–Ω–µ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é –ø–æ –ø—Ä–∏–º–µ—Ä—É –Ω–∏–∂–µ.

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ config.py

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config.py` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```python
import os
from datetime import time as dt_time

# üîê –ù–ê–°–¢–†–û–ô–ö–ò TELEGRAM
TELEGRAM_TOKEN = "–≤–∞—à_telegram_bot_token"
CHAT_IDS = ["–≤–∞—à_chat_id1", "–≤–∞—à_chat_id2"]  # ID —á–∞—Ç–æ–≤ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

# ‚è∞ –ò–ù–¢–ï–†–í–ê–õ–´ –ü–†–û–í–ï–†–û–ö
CHECK_INTERVAL = 60  # —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
MAX_FAIL_TIME = 900  # 15 –º–∏–Ω—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö –¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞–ª–µ—Ä—Ç–∞

# üåô –í–†–ï–ú–ï–ù–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
SILENT_START = 20    # 20:00 - –Ω–∞—á–∞–ª–æ —Ç–∏—Ö–æ–≥–æ —Ä–µ–∂–∏–º–∞
SILENT_END = 9       # 9:00 - –∫–æ–Ω–µ—Ü —Ç–∏—Ö–æ–≥–æ —Ä–µ–∂–∏–º–∞
DATA_COLLECTION_TIME = dt_time(8, 30)  # –í—Ä–µ–º—è —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –æ—Ç—á–µ—Ç–∞

# üìä –ù–ê–°–¢–†–û–ô–ö–ò –†–ï–°–£–†–°–û–í
RESOURCE_CHECK_INTERVAL = 1800  # 30 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
RESOURCE_ALERT_THRESHOLDS = {
    "cpu_alert": 99,
    "ram_alert": 99,  
    "disk_alert": 95,
    "check_consecutive": 2
}
RESOURCE_ALERT_INTERVAL = 1800  # 30 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –∞–ª–µ—Ä—Ç–∞–º–∏

RESOURCE_THRESHOLDS = {
    "cpu_warning": 80,
    "cpu_critical": 90,
    "ram_warning": 85,
    "ram_critical": 95,
    "disk_warning": 80,
    "disk_critical": 90
}

# üîë –ù–ê–°–¢–†–û–ô–ö–ò –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò
SSH_KEY_PATH = "/root/.ssh/id_rsa"  # –ü—É—Ç—å –∫ SSH –∫–ª—é—á—É
SSH_USERNAME = "root"               # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH

# ü™ü –£–ß–ï–¢–ù–´–ï –î–ê–ù–ù–´–ï WINDOWS –°–ï–†–í–ï–†–û–í
WINDOWS_SERVER_CREDENTIALS = {
    "windows_2025": {
        "servers": ["192.168.1.10", "192.168.1.11"],
        "credentials": [
            {"username": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä", "password": "–≤–∞—à_–ø–∞—Ä–æ–ª—å"},
            {"username": "Administrator", "password": "–≤–∞—à_–ø–∞—Ä–æ–ª—å"}
        ]
    },
    "domain_servers": {
        "servers": ["192.168.1.12", "192.168.1.13"],
        "credentials": [
            {"username": "domain\\user", "password": "–≤–∞—à_–ø–∞—Ä–æ–ª—å"}
        ]
    },
    # –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
}

# –û–±—â–∏–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ WinRM (fallback)
WINRM_CONFIGS = [
    {"username": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä", "password": "–≤–∞—à_–ø–∞—Ä–æ–ª—å"},
    {"username": "Administrator", "password": "–≤–∞—à_–ø–∞—Ä–æ–ª—å"},
    # –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏
]

# üåê –í–ï–ë-–ò–ù–¢–ï–†–§–ï–ô–°
WEB_PORT = 5000
WEB_HOST = '0.0.0.0'

# üìÅ –§–ê–ô–õ–´ –î–ê–ù–ù–´–•
STATS_FILE = "/opt/monitoring/data/monitoring_stats.json"
DATA_DIR = "/opt/monitoring/data"

# üñ•Ô∏è –°–ü–ò–°–ö–ò –°–ï–†–í–ï–†–û–í
RDP_SERVERS = [
    "192.168.1.10", "192.168.1.11",  # Windows —Å–µ—Ä–≤–µ—Ä—ã
]

SSH_SERVERS = [
    "192.168.1.20", "192.168.1.21",  # Linux —Å–µ—Ä–≤–µ—Ä—ã
]

PING_SERVERS = [
    "192.168.1.30",  # –°–µ—Ä–≤–µ—Ä—ã —Ç–æ–ª—å–∫–æ –¥–ª—è ping –ø—Ä–æ–≤–µ—Ä–∫–∏
]

# ‚è±Ô∏è –¢–ê–ô–ú–ê–£–¢–´ –î–õ–Ø –†–ê–ó–ù–´–• –¢–ò–ü–û–í –°–ï–†–í–ï–†–û–í
SERVER_TIMEOUTS = {
    "windows_2025": 35,
    "domain_servers": 20,
    "admin_servers": 25,
    "standard_windows": 30,
    "linux": 15
}

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
if not os.path.exists(DATA_DIR):
    os.makedirs(DATA_DIR)

–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–ü–æ–ª—É—á–µ–Ω–∏–µ Telegram —Ç–æ–∫–µ–Ω–∞ –∏ Chat ID
–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather

–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω: /newbot ‚Üí –∏–º—è –±–æ—Ç–∞ ‚Üí username –±–æ—Ç–∞ ‚Üí —Ç–æ–∫–µ–Ω

–ü–æ–ª—É—á–∏—Ç–µ Chat ID:

–î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —á–∞—Ç

–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ /start

–í—ã–ø–æ–ª–Ω–∏—Ç–µ: curl "https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/getUpdates"

–ù–∞–π–¥–∏—Ç–µ chat.id –≤ –æ—Ç–≤–µ—Ç–µ

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –¥–æ—Å—Ç—É–ø–∞

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–∞ (–µ—Å–ª–∏ –Ω–µ—Ç)
ssh-keygen -t rsa -b 4096 -f /root/.ssh/id_rsa

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã
ssh-copy-id -i /root/.ssh/id_rsa.pub user@server-ip

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ WinRM –¥–ª—è Windows
–ù–∞ —Ü–µ–ª–µ–≤—ã—Ö Windows —Å–µ—Ä–≤–µ—Ä–∞—Ö –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ PowerShell:

# –í–∫–ª—é—á–µ–Ω–∏–µ WinRM
Enable-PSRemoting -Force
Set-NetFirewallRule -Name "WINRM-HTTP-In-TCP" -RemoteAddress Any

# –î–ª—è –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
Set-Item -Path WSMan:\localhost\Client\TrustedHosts -Value "*" -Force

–®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ —Å–µ—Ä–≤–µ—Ä–æ–≤
–ò–∑–º–µ–Ω–∏—Ç–µ –º–∞—Å—Å–∏–≤—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–∞—à–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

RDP_SERVERS = [
    "192.168.1.10",  # DC-01
    "192.168.1.11",  # FS-01
    # –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ Windows —Å–µ—Ä–≤–µ—Ä—ã
]

SSH_SERVERS = [
    "192.168.1.20",  # web-01
    "192.168.1.21",  # db-01
    # –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ Linux —Å–µ—Ä–≤–µ—Ä—ã
]

–®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
–î–æ–±–∞–≤—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∞—à–∏—Ö Windows —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏:

WINDOWS_SERVER_CREDENTIALS = {
    "windows_2025": {
        "servers": ["192.168.1.10", "192.168.1.11"],
        "credentials": [
            {"username": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä", "password": "real_password_here"},
            {"username": "Administrator", "password": "real_password_here"}
        ]
    },
    # ... –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã —Å–µ—Ä–≤–µ—Ä–æ–≤
}

–®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è config.py –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É:

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
python -m py_compile config.py

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python -c "import config; print('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ')"

üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
Python 3.8+

–î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä–∞–º –ø–æ SSH/WinRM

Telegram –±–æ—Ç —Ç–æ–∫–µ–Ω

Linux —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–°–æ–∑–¥–∞—Ç—å config.py –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: pip install -r requirements.txt

–ó–∞–ø—É—Å—Ç–∏—Ç—å: python main.py

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
sudo nano /etc/systemd/system/server-monitor.service

[Unit]
Description=Server Monitoring Bot
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/monitoring
ExecStart=/usr/bin/python3 /opt/monitoring/main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl daemon-reload
sudo systemctl enable server-monitor
sudo systemctl start server-monitor
sudo systemctl status server-monitor

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

/opt/monitoring/
‚îú‚îÄ‚îÄ main.py                 # –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫–∞–µ–º—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ config.py              # ‚ö†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é)
‚îú‚îÄ‚îÄ monitor_core.py        # –Ø–¥—Ä–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ bot_menu.py            # –ú–µ–Ω—é –∏ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
‚îú‚îÄ‚îÄ web_interface.py       # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Flask
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ .gitignore            # –ò—Å–∫–ª—é—á–∞–µ—Ç config.py –∏–∑ Git
‚îú‚îÄ‚îÄ extensions/
‚îÇ   ‚îú‚îÄ‚îÄ server_list.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ resource_check.py  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ separate_checks.py # –†–∞–∑–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ç–∏–ø–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ single_check.py    # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ stats_collector.py # –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ web_interface.py   # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ data/                  # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞
systemctl status server-monitor

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl -u server-monitor -f

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏
python -c "from monitor_core import get_current_server_status; print(get_current_server_status())"

–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /diagnose_ssh IP –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ SSH

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ http://–≤–∞—à-—Å–µ—Ä–≤–µ—Ä:5000

–õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º journalctl

üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ LICENSE
